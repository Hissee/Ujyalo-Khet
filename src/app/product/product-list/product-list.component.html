<div class="container my-5">
  <div class="row g-4">
    @for (product of products; track product.id) {
      <div class="col-sm-6 col-md-4 col-lg-3">
        <div class="product-card h-100" (click)="navigateToProduct(product.id)">
          <div class="product-image-wrapper">
            @if (product.image) {
              <img [src]="product.image" class="product-image" [alt]="product.name" 
                   (error)="handleImageError($event)">
            } @else {
              <div class="product-image-placeholder">
                <i class="fas fa-image"></i>
              </div>
            }
            <div class="product-badge">
              <span class="badge-category">{{ product.category }}</span>
            </div>
            @if (product.quantity > 0) {
              <div class="stock-badge">
                <span class="badge-stock">In Stock</span>
              </div>
            } @else {
              <div class="stock-badge">
                <span class="badge-stock-out">Out of Stock</span>
              </div>
            }
          </div>
          
          <div class="product-content">
            <h5 class="product-title">{{ product.name }}</h5>
            @if (product.description) {
              <p class="product-description">
                @if (product.description.length > 60) {
                  {{ product.description.substring(0, 60) }}...
                } @else {
                  {{ product.description }}
                }
              </p>
            }
            <div class="product-footer">
              <div class="product-price">
                <span class="price-label">Price:</span>
                <span class="price-value">Rs. {{ formatPrice(product.price) }}</span>
              </div>
              @if (product.quantity > 0) {
                <span class="quantity-badge">{{ product.quantity }} {{ product.quantity === 1 ? 'item' : 'items' }} available</span>
              }
            </div>
            <button type="button" class="btn-add-to-cart" (click)="addToCart($event, product)">
              <i class="fas fa-shopping-cart"></i>
              <span>Add to Cart</span>
            </button>
          </div>
        </div>
      </div>
    }
  </div>
  
  @if (products.length === 0) {
    <div class="empty-state text-center py-5">
      <i class="fas fa-box-open fa-3x text-muted mb-3"></i>
      <h4 class="text-muted">No products available</h4>
      <p class="text-muted">Check back later for new products!</p>
    </div>
  }
</div>
